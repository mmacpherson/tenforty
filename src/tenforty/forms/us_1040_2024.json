{
  "meta": {
    "form_id": "us_1040",
    "year": 2024,
    "generated_by": "adapted from 2025 template with 2024 tax brackets"
  },
  "nodes": {
    "100": { "id": 100, "op": { "type": "input" }, "name": "L1a_w2_wages" },
    "101": { "id": 101, "op": { "type": "input" }, "name": "L1b_household_wages" },
    "102": { "id": 102, "op": { "type": "input" }, "name": "L1c_tip_income" },
    "103": { "id": 103, "op": { "type": "input" }, "name": "L1d_medicaid_waiver" },
    "104": { "id": 104, "op": { "type": "input" }, "name": "L1e_dependent_care" },
    "105": { "id": 105, "op": { "type": "input" }, "name": "L1f_adoption_benefits" },
    "106": { "id": 106, "op": { "type": "input" }, "name": "L1g_form8919_wages" },
    "107": { "id": 107, "op": { "type": "input" }, "name": "L1h_other_earned" },

    "110": { "id": 110, "op": { "type": "add", "left": 100, "right": 101 }, "name": "_w2_plus_household" },
    "111": { "id": 111, "op": { "type": "add", "left": 110, "right": 102 }, "name": "_plus_tips" },
    "112": { "id": 112, "op": { "type": "add", "left": 111, "right": 103 }, "name": "_plus_medicaid" },
    "113": { "id": 113, "op": { "type": "add", "left": 112, "right": 104 }, "name": "_plus_depcare" },
    "114": { "id": 114, "op": { "type": "add", "left": 113, "right": 105 }, "name": "_plus_adoption" },
    "115": { "id": 115, "op": { "type": "add", "left": 114, "right": 106 }, "name": "_plus_8919" },
    "116": { "id": 116, "op": { "type": "add", "left": 115, "right": 107 }, "name": "L1z_total_wages" },

    "120": { "id": 120, "op": { "type": "input" }, "name": "L2b_taxable_interest" },
    "130": { "id": 130, "op": { "type": "input" }, "name": "L3b_ordinary_dividends" },
    "140": { "id": 140, "op": { "type": "input" }, "name": "L4b_taxable_ira" },
    "150": { "id": 150, "op": { "type": "input" }, "name": "L5b_taxable_pension" },
    "160": { "id": 160, "op": { "type": "input" }, "name": "L6b_taxable_ss" },
    "170": { "id": 170, "op": { "type": "input" }, "name": "L7a_capital_gain" },
    "180": { "id": 180, "op": { "type": "input" }, "name": "L8_sched1_income" },

    "190": { "id": 190, "op": { "type": "add", "left": 116, "right": 120 }, "name": "_wages_plus_int" },
    "191": { "id": 191, "op": { "type": "add", "left": 190, "right": 130 }, "name": "_plus_div" },
    "192": { "id": 192, "op": { "type": "add", "left": 191, "right": 140 }, "name": "_plus_ira" },
    "193": { "id": 193, "op": { "type": "add", "left": 192, "right": 150 }, "name": "_plus_pension" },
    "194": { "id": 194, "op": { "type": "add", "left": 193, "right": 160 }, "name": "_plus_ss" },
    "195": { "id": 195, "op": { "type": "add", "left": 194, "right": 170 }, "name": "_plus_capgain" },
    "196": { "id": 196, "op": { "type": "add", "left": 195, "right": 180 }, "name": "L9_total_income" },

    "200": { "id": 200, "op": { "type": "input" }, "name": "L10_adjustments" },
    "210": { "id": 210, "op": { "type": "sub", "left": 196, "right": 200 }, "name": "L11a_agi" },

    "300": { "id": 300, "op": { "type": "by_status", "values": {
      "single": 301,
      "married_joint": 302,
      "married_separate": 303,
      "head_of_household": 304,
      "qualifying_widow": 305
    }}, "name": "std_ded_lookup" },
    "301": { "id": 301, "op": { "type": "literal", "value": 14600 }, "name": "std_ded_single" },
    "302": { "id": 302, "op": { "type": "literal", "value": 29200 }, "name": "std_ded_mfj" },
    "303": { "id": 303, "op": { "type": "literal", "value": 14600 }, "name": "std_ded_mfs" },
    "304": { "id": 304, "op": { "type": "literal", "value": 21900 }, "name": "std_ded_hoh" },
    "305": { "id": 305, "op": { "type": "literal", "value": 29200 }, "name": "std_ded_qw" },

    "310": { "id": 310, "op": { "type": "input" }, "name": "L12e_itemized_ded" },
    "311": { "id": 311, "op": { "type": "max", "left": 300, "right": 310 }, "name": "L12e_deduction" },

    "320": { "id": 320, "op": { "type": "input" }, "name": "L13a_qbi_deduction" },
    "321": { "id": 321, "op": { "type": "input" }, "name": "L13b_sched1a_ded" },

    "330": { "id": 330, "op": { "type": "add", "left": 311, "right": 320 }, "name": "_ded_plus_qbi" },
    "331": { "id": 331, "op": { "type": "add", "left": 330, "right": 321 }, "name": "L14_total_deductions" },

    "340": { "id": 340, "op": { "type": "sub", "left": 210, "right": 331 }, "name": "_taxable_raw" },
    "341": { "id": 341, "op": { "type": "literal", "value": 0 }, "name": "zero" },
    "342": { "id": 342, "op": { "type": "max", "left": 340, "right": 341 }, "name": "L15_taxable_income" },

    "350": { "id": 350, "op": { "type": "bracket_tax", "table": "federal_2024", "income": 342 }, "name": "L16_tax" },

    "360": { "id": 360, "op": { "type": "input" }, "name": "L17_sched2_addl_tax" },
    "361": { "id": 361, "op": { "type": "add", "left": 350, "right": 360 }, "name": "L18_tax_plus_addl" },

    "370": { "id": 370, "op": { "type": "input" }, "name": "L19_child_tax_credit" },
    "371": { "id": 371, "op": { "type": "input" }, "name": "L20_sched3_credits" },
    "372": { "id": 372, "op": { "type": "add", "left": 370, "right": 371 }, "name": "L21_total_credits" },

    "380": { "id": 380, "op": { "type": "sub", "left": 361, "right": 372 }, "name": "_tax_minus_credits" },
    "381": { "id": 381, "op": { "type": "max", "left": 380, "right": 341 }, "name": "L22_tax_after_credits" },

    "390": { "id": 390, "op": { "type": "input" }, "name": "L23_other_taxes" },
    "391": { "id": 391, "op": { "type": "add", "left": 381, "right": 390 }, "name": "L24_total_tax" },

    "400": { "id": 400, "op": { "type": "input" }, "name": "L25a_w2_withholding" },
    "401": { "id": 401, "op": { "type": "input" }, "name": "L25b_1099_withholding" },
    "402": { "id": 402, "op": { "type": "input" }, "name": "L25c_other_withholding" },
    "403": { "id": 403, "op": { "type": "add", "left": 400, "right": 401 }, "name": "_w2_plus_1099" },
    "404": { "id": 404, "op": { "type": "add", "left": 403, "right": 402 }, "name": "L25d_total_withholding" },

    "410": { "id": 410, "op": { "type": "input" }, "name": "L26_estimated_payments" },

    "420": { "id": 420, "op": { "type": "input" }, "name": "L27a_eic" },
    "421": { "id": 421, "op": { "type": "input" }, "name": "L28_addl_child_credit" },
    "422": { "id": 422, "op": { "type": "input" }, "name": "L29_aoc" },
    "423": { "id": 423, "op": { "type": "input" }, "name": "L30_adoption_credit" },
    "424": { "id": 424, "op": { "type": "input" }, "name": "L31_sched3_refundable" },

    "430": { "id": 430, "op": { "type": "add", "left": 420, "right": 421 }, "name": "_eic_plus_actc" },
    "431": { "id": 431, "op": { "type": "add", "left": 430, "right": 422 }, "name": "_plus_aoc" },
    "432": { "id": 432, "op": { "type": "add", "left": 431, "right": 423 }, "name": "_plus_adoption" },
    "433": { "id": 433, "op": { "type": "add", "left": 432, "right": 424 }, "name": "L32_refundable_credits" },

    "440": { "id": 440, "op": { "type": "add", "left": 404, "right": 410 }, "name": "_withhold_plus_est" },
    "441": { "id": 441, "op": { "type": "add", "left": 440, "right": 433 }, "name": "L33_total_payments" },

    "450": { "id": 450, "op": { "type": "sub", "left": 441, "right": 391 }, "name": "_payments_minus_tax" },
    "451": { "id": 451, "op": { "type": "max", "left": 450, "right": 341 }, "name": "L34_overpaid" },

    "460": { "id": 460, "op": { "type": "sub", "left": 391, "right": 441 }, "name": "_tax_minus_payments" },
    "461": { "id": 461, "op": { "type": "max", "left": 460, "right": 341 }, "name": "L37_amount_owed" },

    "500": { "id": 500, "op": { "type": "div", "left": 391, "right": 196 }, "name": "_effective_rate_raw" },
    "501": { "id": 501, "op": { "type": "literal", "value": 100 }, "name": "hundred" },
    "502": { "id": 502, "op": { "type": "mul", "left": 500, "right": 501 }, "name": "effective_rate_pct" },

    "510": { "id": 510, "op": { "type": "div", "left": 391, "right": 116 }, "name": "_tax_on_wages_rate" },
    "511": { "id": 511, "op": { "type": "mul", "left": 510, "right": 501 }, "name": "tax_on_wages_pct" }
  },
  "tables": {
    "federal_2024": {
      "brackets": {
        "single": [
          { "threshold": 11600, "rate": 0.10 },
          { "threshold": 47150, "rate": 0.12 },
          { "threshold": 100525, "rate": 0.22 },
          { "threshold": 191950, "rate": 0.24 },
          { "threshold": 243725, "rate": 0.32 },
          { "threshold": 609350, "rate": 0.35 },
          { "threshold": 1e18, "rate": 0.37 }
        ],
        "married_joint": [
          { "threshold": 23200, "rate": 0.10 },
          { "threshold": 94300, "rate": 0.12 },
          { "threshold": 201050, "rate": 0.22 },
          { "threshold": 383900, "rate": 0.24 },
          { "threshold": 487450, "rate": 0.32 },
          { "threshold": 731200, "rate": 0.35 },
          { "threshold": 1e18, "rate": 0.37 }
        ],
        "married_separate": [
          { "threshold": 11600, "rate": 0.10 },
          { "threshold": 47150, "rate": 0.12 },
          { "threshold": 100525, "rate": 0.22 },
          { "threshold": 191950, "rate": 0.24 },
          { "threshold": 243725, "rate": 0.32 },
          { "threshold": 365600, "rate": 0.35 },
          { "threshold": 1e18, "rate": 0.37 }
        ],
        "head_of_household": [
          { "threshold": 16550, "rate": 0.10 },
          { "threshold": 63100, "rate": 0.12 },
          { "threshold": 100500, "rate": 0.22 },
          { "threshold": 191950, "rate": 0.24 },
          { "threshold": 243700, "rate": 0.32 },
          { "threshold": 609350, "rate": 0.35 },
          { "threshold": 1e18, "rate": 0.37 }
        ],
        "qualifying_widow": [
          { "threshold": 23200, "rate": 0.10 },
          { "threshold": 94300, "rate": 0.12 },
          { "threshold": 201050, "rate": 0.22 },
          { "threshold": 383900, "rate": 0.24 },
          { "threshold": 487450, "rate": 0.32 },
          { "threshold": 731200, "rate": 0.35 },
          { "threshold": 1e18, "rate": 0.37 }
        ]
      }
    }
  },
  "inputs": [
    100, 101, 102, 103, 104, 105, 106, 107,
    120, 130, 140, 150, 160, 170, 180,
    200,
    310, 320, 321,
    360, 370, 371, 390,
    400, 401, 402, 410,
    420, 421, 422, 423, 424
  ],
  "outputs": [
    116, 196, 210, 342, 350, 391, 441, 451, 461, 502
  ],
  "invariants": [
    { "type": "monotonic", "input": "L1a_w2_wages", "output": "L24_total_tax" },
    { "type": "monotonic", "input": "L2b_taxable_interest", "output": "L24_total_tax" },
    { "type": "bounds", "node": "effective_rate_pct", "min": 0, "max": 37 }
  ]
}
